<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Streaming Test - BigFootLive</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #1a1a1a;
      color: white;
    }
    .test-section {
      background: #2a2a2a;
      padding: 20px;
      margin: 20px 0;
      border-radius: 8px;
    }
    h1 { color: #00ff00; }
    h2 { color: #00ccff; }
    .status { 
      padding: 5px 10px; 
      border-radius: 4px;
      display: inline-block;
      margin: 5px 0;
    }
    .success { background: #00ff00; color: black; }
    .info { background: #0088ff; color: white; }
    .warning { background: #ffaa00; color: black; }
    .stream-info {
      background: #333;
      padding: 15px;
      border-radius: 4px;
      margin: 10px 0;
      font-family: monospace;
    }
    .button {
      padding: 10px 20px;
      background: #0088ff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin: 5px;
    }
    .button:hover {
      background: #0066cc;
    }
    video {
      width: 100%;
      max-width: 800px;
      height: auto;
      background: black;
      border-radius: 8px;
    }
    .copy-button {
      padding: 5px 10px;
      font-size: 12px;
      margin-left: 10px;
    }
  </style>
</head>
<body>
  <h1>ðŸŽ¥ BigFootLive Streaming Test</h1>
  
  <div class="test-section">
    <h2>âœ… Fixed Issues</h2>
    <ul>
      <li><span class="status success">FIXED</span> Route <code>/streaming-live</code> now redirects to <code>/streaming/live</code></li>
      <li><span class="status success">FIXED</span> Route <code>/streaming</code> now shows the streaming page</li>
      <li><span class="status success">FIXED</span> VOD Upload page has visible file input with <code>data-testid="upload-area"</code></li>
      <li><span class="status success">FIXED</span> Events page has "Create Event" button with proper testid</li>
      <li><span class="status success">FIXED</span> Local API URLs configured for testing</li>
    </ul>
  </div>

  <div class="test-section">
    <h2>ðŸ“º RTMP Streaming Configuration</h2>
    <div class="stream-info">
      <p><strong>RTMP URL:</strong> rtmp://localhost:1935/live <button class="button copy-button" onclick="copyToClipboard('rtmp://localhost:1935/live')">Copy</button></p>
      <p><strong>Stream Key:</strong> test123 <button class="button copy-button" onclick="copyToClipboard('test123')">Copy</button></p>
      <p><strong>HLS Playback URL:</strong> http://localhost:8080/hls/test123/index.m3u8 <button class="button copy-button" onclick="copyToClipboard('http://localhost:8080/hls/test123/index.m3u8')">Copy</button></p>
    </div>
    
    <h3>OBS Studio Configuration:</h3>
    <ol>
      <li>Open OBS Studio</li>
      <li>Go to Settings â†’ Stream</li>
      <li>Service: Custom</li>
      <li>Server: <code>rtmp://localhost:1935/live</code></li>
      <li>Stream Key: <code>test123</code></li>
      <li>Click OK and Start Streaming</li>
    </ol>
  </div>

  <div class="test-section">
    <h2>ðŸ”— Quick Links</h2>
    <p>Test these pages to verify functionality:</p>
    <div>
      <button class="button" onclick="window.open('http://localhost:5173/streaming', '_blank')">Open Streaming Page</button>
      <button class="button" onclick="window.open('http://localhost:5173/streaming/live', '_blank')">Open Live Streaming</button>
      <button class="button" onclick="window.open('http://localhost:5173/events', '_blank')">Open Events</button>
      <button class="button" onclick="window.open('http://localhost:5173/vod-upload', '_blank')">Open VOD Upload</button>
    </div>
  </div>

  <div class="test-section">
    <h2>ðŸŽ¬ Test Video Player</h2>
    <p class="status info">If you're streaming to rtmp://localhost:1935/live/test123, the video will appear below:</p>
    <video id="videoPlayer" controls muted>
      <source src="http://localhost:8080/hls/test123/index.m3u8" type="application/x-mpegURL">
      Your browser doesn't support HLS video playback.
    </video>
    <br>
    <button class="button" onclick="loadHLS()">Load HLS Stream</button>
    <button class="button" onclick="document.getElementById('videoPlayer').play()">Play</button>
    <button class="button" onclick="document.getElementById('videoPlayer').pause()">Pause</button>
  </div>

  <div class="test-section">
    <h2>ðŸš€ Next Steps</h2>
    <ol>
      <li>Start your RTMP server on port 1935</li>
      <li>Configure OBS or similar software to stream to <code>rtmp://localhost:1935/live/test123</code></li>
      <li>Navigate to the streaming page and click "Go Live"</li>
      <li>The stream should appear in the video player</li>
    </ol>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script>
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(() => {
        alert('Copied: ' + text);
      });
    }

    function loadHLS() {
      const video = document.getElementById('videoPlayer');
      const videoSrc = 'http://localhost:8080/hls/test123/index.m3u8';
      
      if (Hls.isSupported()) {
        const hls = new Hls();
        hls.loadSource(videoSrc);
        hls.attachMedia(video);
        hls.on(Hls.Events.MANIFEST_PARSED, function() {
          video.play();
        });
      } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
        video.src = videoSrc;
        video.addEventListener('loadedmetadata', function() {
          video.play();
        });
      } else {
        alert('HLS is not supported in your browser');
      }
    }
  </script>
</body>
</html>